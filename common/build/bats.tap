1..153
ok 1 should download cf and connect to cluster [CF]
ok 2 should retrieve the host from the URL from CF [CF]
ok 3 should bind a service only if it's already running [CF]
ok 4 should deploy app to test environment without additional services if pipeline descriptor is missing [CF][Maven]
ok 5 should deploy app to test environment with additional services [CF][Maven]
ok 6 should deploy app to test environment without additional services if pipeline descriptor is missing [CF][Gradle]
ok 7 should deploy app to test environment with additional services [CF][Gradle]
ok 8 should prepare and execute smoke tests [CF][Maven]
ok 9 should prepare and execute smoke tests [CF][Gradle]
ok 10 should skip rollback deploy step if there are no tags [CF]
ok 11 should deploy app to test environment for rollback testing [CF][Maven]
ok 12 should deploy app to test environment for rollback testing [CF][Gradle]
ok 13 should skip rollback testing step if there are no tags [CF]
ok 14 should prepare and execute rollback tests [CF][Maven]
ok 15 should prepare and execute rollback tests [CF][Gradle]
ok 16 should deploy app to stage environment without additional services if pipeline descriptor is missing [CF][Maven]
ok 17 should deploy app to stage environment with additional services [CF][Maven]
ok 18 should deploy app to stage environment without additional services if pipeline descriptor is missing [CF][Gradle]
ok 19 should deploy app to stage environment with additional services [CF][Gradle]
ok 20 should prepare and execute e2e tests [CF][Maven]
ok 21 should prepare and execute e2e tests [CF][Gradle]
ok 22 should deploy app to prod environment [CF][Maven]
ok 23 should deploy app to prod environment without additional services if pipeline descriptor is missing [CF][Gradle]
ok 24 should complete switch over on prod [CF][Maven]
ok 25 should complete switch over on prod [CF][Gradle]
ok 26 should complete switch over on prod without doing anything if app is missing [CF][Maven]
ok 27 should complete switch over on prod without doing anything if app is missing [CF][Gradle]
ok 28 should rollback to blue instance on prod [CF][Maven]
ok 29 should rollback to blue instance on prod [CF][Gradle]
ok 30 should not rollback to blue if blue is missing [CF][Maven]
ok 31 should not rollback to blue if blue is missing [CF][Gradle]
ok 32 should set BUILD_OPTIONS if there were none [Gradle]
ok 33 should append security props for BUILD_OPTIONS if it wasn't set [Gradle]
ok 34 should not append additional security props for BUILD_OPTIONS if it wasn't set [Gradle]
ok 35 should set a version and execute build for Concourse [Gradle]
ok 36 should print test results when build failed for Jenkins [Gradle]
ok 37 should set a version and execute build for Jenkins [Gradle]
ok 38 should print test results when build failed for Concourse [Gradle]
ok 39 should skip the step if prod tag is missing for apiCompatibilityCheck [Gradle]
ok 40 should run the check when prod tag exists for apiCompatibilityCheck for Concourse [Gradle]
ok 41 should run the check when prod tag exists for apiCompatibilityCheck for Jenkins [Gradle]
ok 42 should print group id [Gradle]
ok 43 should print artifact id [Gradle]
ok 44 should print that build has failed [Gradle]
ok 45 should print stubrunner ids property [Gradle]
ok 46 should run the smoke tests for Concourse [Gradle]
ok 47 should run the smoke tests for Jenkins [Gradle]
ok 48 should run the e2e tests for Concourse [Gradle]
ok 49 should run the e2e tests for Jenkins [Gradle]
ok 50 should return 'target' for outputFolder [Gradle]
ok 51 should return gradle test results for testResultsAntPattern [Gradle]
ok 52 should return unknown if no matching project type is found
ok 53 should return MAVEN if mvnw file is found
ok 54 should return GRADLE if gradlew file is found
ok 55 should return PROJECT_TYPE env var after sourcing
ok 56 should download an artifact if file hasn't been downloaded
ok 57 should download a WAR artifact if file hasn't been downloaded
ok 58 should exit 1 when failed to download the artifact
ok 59 should pass if kubectl has kubeconfig passed
ok 60 should fail if kubectl doesn't have kubeconfig passed
ok 61 should pass docker related properties to the build [K8S][Maven]
ok 62 should download kubectl and connect to cluster [K8S]
ok 63 should create a temporary file with CA when CA data got passed [K8S]
ok 64 should use token from client token env var to connect to the cluster [K8S]
ok 65 should use token from a file to connect to the cluster [K8S]
ok 66 should deploy app to test environment without additional services if pipeline descriptor is missing for non-minikube [K8S][Maven]
ok 67 should deploy app to test environment without additional services if pipeline descriptor is missing for minikube [K8S][Maven]
ok 68 should deploy app to test environment with additional services for non-minikube [K8S][Maven]
ok 69 should deploy app to test environment with additional services for minikube [K8S][Maven]
ok 70 should deploy app to test environment without additional services if pipeline descriptor is missing for minikube [K8S][Gradle]
ok 71 should deploy app to test environment with additional services for non-minikube [K8S][Gradle]
ok 72 should deploy app to test environment with additional services for minikube [K8S][Gradle]
ok 73 should prepare and execute smoke tests for minikube [K8S][Maven]
ok 74 should prepare and execute smoke tests for minikube [K8S][Gradle]
ok 75 should prepare and execute smoke tests for non minikube [K8S][Maven]
ok 76 should prepare and execute smoke tests for non minikube [K8S][Gradle]
ok 77 should deploy app for rollback tests without additional services if pipeline descriptor is missing for minikube [K8S][Gradle]
ok 78 should deploy app to rollback test environment with additional services for non-minikube [K8S][Gradle]
ok 79 should deploy app to rollback test environment with additional services for minikube [K8S][Gradle]
ok 80 should skip the rollback step if no prod deployment took place [K8S][Maven]
ok 81 should prepare and execute rollback tests for minikube [K8S][Maven]
ok 82 should prepare and execute rollback tests for minikube [K8S][Gradle]
ok 83 should prepare and execute rollback tests for non minikube [K8S][Maven]
ok 84 should prepare and execute rollback tests for non minikube [K8S][Gradle]
ok 85 should deploy app for e2e tests without additional services if pipeline descriptor is missing for minikube [K8S][Gradle]
ok 86 should deploy app to stage environment with additional services for non-minikube [K8S][Gradle]
ok 87 should deploy app to stage environment with additional services for minikube [K8S][Gradle]
ok 88 should prepare and execute e2e tests for minikube [K8S][Maven]
ok 89 should prepare and execute e2e tests for minikube [K8S][Gradle]
ok 90 should prepare and execute e2e tests for non minikube [K8S][Maven]
ok 91 should prepare and execute e2e tests for non minikube [K8S][Gradle]
ok 92 should escape non DNS valid name [K8S]
ok 93 should not escape a valid DNS name [K8S]
ok 94 should return false if object hasn't been deployed [K8S]
ok 95 should return true if object has been deployed [K8S]
ok 96 should deploy blue instance for non minikube [K8S][Maven]
ok 97 should deploy blue instance for non minikube [K8S][Gradle]
ok 98 should fail to deploy blue instance for non minikube when green is already deployed [K8S][Maven]
ok 99 should fail to deploy blue instance for non minikube when green is already deployed [K8S][Gradle]
ok 100 should return the dns escaped app name [K8S]
ok 101 should return list of deployed apps [K8S]
ok 102 should not return invalid code when empty list of deployed apps is returned [K8S]
ok 103 should return an empty string when no deployments are matched [K8S]
ok 104 should return the oldest deployment by sorting the deployment names [K8S]
ok 105 should delete green instance for non minikube [K8S][Maven]
ok 106 should delete green instance for non minikube [K8S][Gradle]
ok 107 should delete green instance for non minikube [K8S][Maven]
ok 108 should delete green instance for non minikube [K8S][Gradle]
ok 109 should rollback to blue [K8S][Maven]
ok 110 should rollback to blue [K8S][Gradle]
ok 111 should set BUILD_OPTIONS if there were none [Maven]
ok 112 should append security props for BUILD_OPTIONS if it wasn't set [Maven]
ok 113 should not append additional security props for BUILD_OPTIONS if it wasn't set [Maven]
ok 114 should set a version and execute build for Concourse [Maven]
ok 115 should print test results when build failed for Jenkins [Maven]
ok 116 should set a version and execute build for Jenkins [Maven]
ok 117 should print test results when build failed for Concourse [Maven]
ok 118 should skip the step if prod tag is missing for apiCompatibilityCheck [Maven]
ok 119 should run the check when prod tag exists for apiCompatibilityCheck for Concourse [Maven]
ok 120 should run the check when prod tag exists for apiCompatibilityCheck for Jenkins [Maven]
ok 121 should print a property value if it exists [Maven]
ok 122 should print empty string if it doesn't exist [Maven]
ok 123 should print empty string if it doesn't exist and _JAVA_OPTIONS are passed [Maven]
ok 124 should print group id [Maven]
ok 125 should print artifact id [Maven]
ok 126 should print that build has failed [Maven]
ok 127 should print stubrunner ids property [Maven]
ok 128 should run the smoke tests for Concourse [Maven]
ok 129 should run the smoke tests for Jenkins [Maven]
ok 130 should run the e2e tests for Concourse [Maven]
ok 131 should run the e2e tests for Jenkins [Maven]
ok 132 should return 'target' for outputFolder [Maven]
ok 133 should return maven test results for testResultsAntPattern [Maven]
ok 134 should run build for build_and_upload
ok 135 should run apiCompatibilityCheck for build_api_compatibility_check
ok 136 should run testDeploy for testDeploy
ok 137 should run smoke tests for test_smoke
ok 138 should do nothing if there's no prod deployment for rollback deployment
ok 139 should call testRollbackDeploy with latest prod version
ok 140 should do nothing if there's no prod deployment for rollback test
ok 141 should do nothing if there's prod tag is 'master' for rollback test
ok 142 should call runSmokeTests with latest prod version for rollback tests
ok 143 should run stage deployment for stage_deploy
ok 144 should run stage deployment for stage_e2e
ok 145 should run prod deployment for prod_deploy
ok 146 should delete blue instance for prod_complete
ok 147 should rollback to blue instance for prod_rollback
ok 148 toLowerCase should convert a string lower case
ok 149 yaml2json should convert valid YAML file to JSON
ok 150 yaml2json should fail with invalid YAML file
ok 151 deployServices should deploy services from pipeline descriptor
ok 152 parsePipelineDescriptor should export an env var with parsed YAML
ok 153 sourcing pipeline.sh should export an env var with lower case env var
